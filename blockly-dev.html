<html>
<head>
  <meta charset="utf-8">
  <!-- NOTE:  Don't change this Title -->
  <title>Blockly Frame</title>

  <link type="text/css" rel="stylesheet" href="media/blockly.css">

  <script>
     var GLOBAL_DEBUG = true;   // Sets DEBUG a quizme*.js files.
  </script>

<!--   --------- FOR DEVELOPMENT USE quizzes.json  -----------     -->
  <script type="text/javascript" src="./quizzes.js"></script>

  <script type="text/javascript" src="closure-library-read-only/closure/goog/base.js"></script>
  <script type="text/javascript" src="./jquery-1.9.1.min.js"></script>

<!--   <script type="text/javascript" src="./blockly-quizly-all_simple.js"></script> -->
<script type="text/javascript" src="./all_blockly.js"></script>

<!--     FOR DEVELOPMENT UNCOMPRESS appinventor and quizly   --------
<script type="text/javascript" src="./all_appinv.js"></script>
<script type="text/javascript" src="./all_quizly.js"></script>
----------------------------- --> 

<!-- App Inventor files -->
<script type="text/javascript" src="./quizme-appinv-revised/blockly.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/bubble.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/comment.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/connection.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/contextmenu.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/css.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field_angle.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field_checkbox.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field_colour.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field_dropdown.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field_image.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field_label.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field_textinput.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/field_variable.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/flyout.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/generator.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/icon.js"></script>
<script type="text/javascript" src="./quizme-appinv-revised/inject.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/input.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/mutator.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/names.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/procedures.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/realtime.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/realtime-client-utils.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/scrollbar.js"></script>

<script type="text/javascript" src="./quizme-appinv-revised/blockly-toolbox.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/tooltip.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/trashcan.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/utils.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/variables.js"></script>

<script type="text/javascript" src="./quizme-appinv-revised/warning.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/widgetdiv.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/workspace.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/xml.js"></script>
<script type="text/javascript" src="./quizme-appinv-revised/typeblock.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/msg.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/block.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/blocks.js"></script>
<script type="text/javascript" src="./appinventor/lib/blockly/src/core/block_svg.js"

 <script type="text/javascript" src="./appinventor/blocklyeditor/src/msg/zh_tw/_messages.js"></script>
 <script type="text/javascript" src="./appinventor/blocklyeditor/src/msg/zh_cn/_messages.js"></script>
 <script type="text/javascript" src="./appinventor/blocklyeditor/src/msg/en/_messages.js"></script>
 <script type="text/javascript" src="./appinventor/blocklyeditor/src/msg/es_es/_messages.js"></script>
 <script type="text/javascript" src="./appinventor/blocklyeditor/src/msg/it_it/_messages.js"></script>
 <script type="text/javascript" src="./appinventor/blocklyeditor/src/msg/ru/_messages.js"></script>
 <script type="text/javascript" src="./appinventor/blocklyeditor/src/msg/ko_kr/_messages.js"></script>
 <script type="text/javascript" src="./appinventor/blocklyeditor/src/msg/sv/_messages.js"></script>
 <script type="text/javascript" src="./appinventor/blocklyeditor/src/instrument.js"></script>

<script type="text/javascript" src="./appinventor/blocklyeditor/src/backpack.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/blocklyeditor.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/blockColors.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/translation_properties.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/translation_events.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/translation_methods.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/translation_params.js"></script>
<script type="text/javascript" src= "./appinventor/blocklyeditor/src/component.js"></script>
<script type="text/javascript" src= "./appinventor/blocklyeditor/src/util.js"></script>

<!-- 		  // Quizly: Uses Toolbox not Drawer -->
<!-- 		  //    "./appinventor/blocklyeditor/src/drawer.js"></script> -->

<script type="text/javascript" src="./quizme-appinv-revised/drawer.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/savefile.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/versioning.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/mutators.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/field_lexical_variable.js"></script>

<script type="text/javascript" src="./quizme-appinv-revised/errorIcon.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/warningHandler.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/field_procedure.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/field_textblockinput.js"></script>

<script type="text/javascript" src="./quizme-appinv-revised/warningIndicator.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/flydown.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/field_flydown.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/field_parameter_flydown.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/field_global_flydown.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/field_procedure_flydown.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/nameSet.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/substitution.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/language_switch.js"></script>
<script type="text/javascript" src="./appinventor/blocklyeditor/src/versioning.js"></script>

<!--   Quizly files --> 
<!--     blocks files from appinventor/blocklyeditor/src/blocks -->
  <script type="text/javascript" src="./quizme-blocks/control.js"></script>
  <script type="text/javascript" src="./quizme-blocks/logic.js"></script>
  <script type="text/javascript" src="./quizme-blocks/text.js"></script>
  <script type="text/javascript" src="./quizme-blocks/lists.js"></script>
  <script type="text/javascript" src="./quizme-blocks/math.js"></script>
  <script type="text/javascript" src="./quizme-blocks/utilities.js"></script>
  <script type="text/javascript" src="./quizme-blocks/procedures.js"></script>
  <script type="text/javascript" src="./quizme-blocks/lexical-variables.js"></script>
  <script type="text/javascript" src="./quizme-blocks/colors.js"></script>

  <script type="text/javascript" src="./quizme-blocks/components.js"></script>
  <script type="text/javascript" src='./quizme-appinv-revised/blockly-toolbox.js'></script>

  <!-- Blockly javascript evaluators, modified for App Inventor -->
  <script type="text/javascript" src="./quizme-javascript/javascript.js"></script>
  <script type="text/javascript" src="./quizme-javascript/logic.js"></script>
  <script type="text/javascript" src="./quizme-javascript/control.js"></script>
  <script type="text/javascript" src="./quizme-javascript/procedures.js"></script>
  <script type="text/javascript" src="./quizme-javascript/math.js"></script>
  <script type="text/javascript" src="./quizme-javascript/lists.js"></script>
  <script type="text/javascript" src="./quizme-javascript/text.js"></script>
  <script type="text/javascript" src="./quizme-javascript/variables.js"></script>
  <script type="text/javascript" src="./quizme-javascript/componentblock.js"></script>

  <!-- quizme-initblocklyeditor.js is revised version of Blockly.BlocklyEditor.startup  --> 
  <script type="text/javascript" src="quizme-initblocklyeditor.js"></script>
  <script type="text/javascript" src="quizme.js"></script>
  <script type="text/javascript" src="quizme-helper.js"></script>
  <script type="text/javascript" src="./quizme-components.js"></script>
  <script type="text/javascript" src="./quizme-component-types.js"></script>
  <script type="text/javascript" src="./makequiz-helper.js"></script>
  <script type="text/javascript" src="./quizme-eval.js"></script>

  <!--  This should be loaded last b/c it overrides certain built-in functions. -->
  <script type="text/javascript" src="./quizme-overrides.js"></script>

  <style>
    html, body {
      background-color: #fff;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    .blocklySvg {
      height: 100%;
      width: 100%;
    }
  </style>

  <script>
    // NOTE: Blockly injects a static toolbox in the form of an Xml tree. We want our toolbox to be dynamic but
    //  we must initialize it here. The TOOLBOX category serves as a static heading for the toolbox.

    function initBlockly() {
      if (GLOBAL_DEBUG) console.log('RAM: initBlockly');

      // The quizzes are loaded by the script above and stored in global var quizzes.
      initBlocklyFrame(quizzes);
    }
  </script>

<!--     <script> -->
<!--       // NOTE: Blockly injects a static toolbox in the form of an Xml tree. We want our toolbox to be dynamic but  -->
<!--       //  we must initialize it here. The TOOLBOX category serves as a static heading for the toolbox. -->
<!--       function initBlockly() { -->

<!--         var href = window.parent.document.location.href;  // Check parent window? -->
<!--         if (href.indexOf('quizly') == -1) { -->
<!--           href = window.document.location.href;           // Check this window -->
<!--         } -->
<!--         var quizname; -->
<!--         var arglist = href.split('?')[1]; -->
<!--         if (arglist) { -->
<!--           var params = arglist.split('&'); -->
<!--           for (var i = 0; i < params.length; i++) { -->
<!--              var keyval = params[i].split('='); -->
<!--              if (keyval[0] == 'quizname') -->
<!--                quizname = keyval[1]; -->
<!--           } -->
<!--         } -->

<!--         // Typeblocking configuration -->
<!-- 	var typeblock_config = { -->
<!-- 	  frame: 'ai_frame', -->
<!-- 	  typeBlockDiv: 'ai_type_block', -->
<!-- 	  inputText: 'ac_input_text' -->
<!-- 	}; -->

<!--         Blockly.inject(document.body, -->
<!--             {path: './', -->
<!--              backpack:true, -->
<!--              trashcan: true, -->
<!--              toolbox: '<xml id="toolbox" style="display:none"><category name="TOOLBOX"><block type="bogus"></block></category></xml>' -->
<!-- //             toolbox: '<xml id="toolbox" style="display:none"><category name="TOOLBOX"></category></xml>' -->
<!--             }); -->

<!-- 	 //This is what Blockly's init function does when passing options. -->
<!-- 	 //We are overriding the init process so putting it here -->
<!-- 	 goog.mixin(Blockly, { -->
<!-- 	   collapse : true, -->
<!-- 	   configForTypeBlock: typeblock_config -->
<!-- 	 }); -->

<!-- 	//This would also be done in Blockly init, but we need to do it here cause of -->
<!-- 	//the different init process in drawer (it'd be undefined at the time it hits -->
<!-- 	//init in Blockly) -->
<!-- 	if (!Blockly.readOnly) -->
<!-- 	  Blockly.TypeBlock(Blockly.configForTypeBlock); -->


<!--         // Let the top-level application know that Blockly is ready. -->
<!--         // Do any Quizme initializations here. -->
<!--         window.parent.blocklyLoaded(Blockly); -->


<!--         if (window.parent.document.title == "Quiz Maker Utility") -->
<!--           initQuizMaker('./'); -->
<!--         else  -->
<!--           initQuizme(quizname, './', arglist); -->
<!--       } -->
<!--     </script> -->

</head>
<body id="ai_frame" onload="initBlockly()">
 <div id="ai_type_block" style="display:none">
  <p>
    <input id="ac_input_text" />
  </p>
 </div>
</body>
</html>
